import{a6 as Z,a7 as E,c as J,a1 as G,X as Q,V as X,r as g,j as e,G as h,L as u,Z as q,_ as ee,$ as w,a8 as b,H as N,J as y,K as v,Q as D,M as k,a9 as Y,aa as se,a0 as T}from"./index-CFBfUQr5.js";import{T as U,a as P,b as f,c as d,d as R,e as o}from"./table-C3xMFgyL.js";import{A as te,a as re,b as ie,c as ne,d as ae,e as le,f as ce,g as de,h as oe}from"./alert-dialog-dK_wMhNu.js";import{C as F}from"./chevron-left-D8QJVROw.js";import{M as me,B as xe,a as he}from"./map-pin-BsP7L8Kg.js";import{S as I}from"./square-pen-2UOtia5C.js";import{H as ue}from"./house-xoaF5Jwy.js";import{P as z}from"./plus-Cvcf7KTe.js";import{K as je}from"./key-CbQEqBkp.js";import{W as pe}from"./wrench-D4g40m_u.js";function W(s,t){const r=ye(s);let a;if(r.date){const c=ve(r.date,2);a=De(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const m=a.getTime();let x=0,j;if(r.time&&(x=Ce(r.time),isNaN(x)))return new Date(NaN);if(r.timezone){if(j=we(r.timezone),isNaN(j))return new Date(NaN)}else{const c=new Date(m+x),p=new Date(0);return p.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),p.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),p}return new Date(m+x+j)}const M={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ge=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ye(s){const t={},i=s.split(M.dateTimeDelimiter);let r;if(i.length>2)return t;if(/:/.test(i[0])?r=i[0]:(t.date=i[0],r=i[1],M.timeZoneDelimiter.test(t.date)&&(t.date=s.split(M.timeZoneDelimiter)[0],r=s.substr(t.date.length,s.length))),r){const a=M.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function ve(s,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=s.match(i);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,m=r[2]?parseInt(r[2]):null;return{year:m===null?a:m*100,restDateString:s.slice((r[1]||r[2]).length)}}function De(s,t){if(t===null)return new Date(NaN);const i=s.match(fe);if(!i)return new Date(NaN);const r=!!i[4],a=C(i[1]),m=C(i[2])-1,x=C(i[3]),j=C(i[4]),c=C(i[5])-1;if(r)return Ae(t,j,c)?be(t,j,c):new Date(NaN);{const p=new Date(0);return!Ie(t,m,x)||!Me(t,a)?new Date(NaN):(p.setUTCFullYear(t,m,Math.max(a,x)),p)}}function C(s){return s?parseInt(s):1}function Ce(s){const t=s.match(ge);if(!t)return NaN;const i=$(t[1]),r=$(t[2]),a=$(t[3]);return ke(i,r,a)?i*Z+r*E+a*1e3:NaN}function $(s){return s&&parseFloat(s.replace(",","."))||0}function we(s){if(s==="Z")return 0;const t=s.match(Ne);if(!t)return 0;const i=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Ue(r,a)?i*(r*Z+a*E):NaN}function be(s,t,i){const r=new Date(0);r.setUTCFullYear(s,0,4);const a=r.getUTCDay()||7,m=(t-1)*7+i+1-a;return r.setUTCDate(r.getUTCDate()+m),r}const Te=[31,null,31,30,31,30,31,31,30,31,30,31];function V(s){return s%400===0||s%4===0&&s%100!==0}function Ie(s,t,i){return t>=0&&t<=11&&i>=1&&i<=(Te[t]||(V(s)?29:28))}function Me(s,t){return t>=1&&t<=(V(s)?366:365)}function Ae(s,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function ke(s,t,i){return s===24?t===0&&i===0:i>=0&&i<60&&t>=0&&t<60&&s>=0&&s<25}function Ue(s,t){return t>=0&&t<=59}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=J("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function Ze(){const{id:s}=G(),t=Q(),{properties:i,accessCodes:r,maintenanceRequests:a,checklists:m,getPropertyById:x,removeProperty:j}=X(),[c,p]=g.useState("overview"),l=g.useMemo(()=>s?x(s):null,[s,x]),B=g.useMemo(()=>Object.values(r).filter(n=>n.propertyId===s),[s,r]),H=g.useMemo(()=>Object.values(a).filter(n=>n.propertyId===s),[s,a]),O=g.useMemo(()=>Object.values(m).filter(n=>n.propertyId===s),[s,m]),K=async()=>{if(s)try{await j(s),t("/properties")}catch(n){console.error(n)}};return Object.keys(i).length===0&&!l?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{variant:"outline",size:"sm",asChild:!0,className:"mr-4",children:e.jsxs(u,{to:"/properties",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Back"]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:l.name}),e.jsxs("p",{className:"text-muted-foreground mt-1 flex items-center",children:[e.jsx(me,{className:"mr-1 h-4 w-4"}),l.address,", ",l.city," ",l.zipCode]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(h,{asChild:!0,variant:"outline",children:e.jsxs(u,{to:`/properties/${s}/edit`,children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Edit"]})}),e.jsxs(te,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(h,{variant:"destructive",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"})," Delete"]})}),e.jsxs(ie,{children:[e.jsxs(ne,{children:[e.jsx(ae,{children:"Are you sure?"}),e.jsx(le,{children:"This action cannot be undone. This will permanently delete the property and all associated data."})]}),e.jsxs(ce,{children:[e.jsx(de,{children:"Cancel"}),e.jsx(oe,{onClick:K,children:"Delete"})]})]})]})]})]}),e.jsxs(q,{value:c,onValueChange:p,className:"space-y-4",children:[e.jsxs(ee,{children:[e.jsx(w,{value:"overview",children:"Overview"}),e.jsx(w,{value:"access-codes",children:"Access Codes"}),e.jsx(w,{value:"checklists",children:"Checklists"}),e.jsx(w,{value:"maintenance",children:"Maintenance"})]}),e.jsxs(b,{value:"overview",className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs(N,{children:[e.jsx(y,{children:e.jsx(v,{children:"Property Details"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bedrooms"}),e.jsx("div",{className:"font-medium",children:l.bedrooms})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bathrooms"}),e.jsx("div",{className:"font-medium",children:l.bathrooms})]})]})]}),l.region&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Region"}),e.jsx("div",{className:"font-medium",children:l.region})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Full Address"}),e.jsxs("div",{className:"font-medium",children:[l.address,e.jsx("br",{}),l.city," ",l.zipCode]})]}),l.description&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),e.jsx("div",{children:l.description})]})]})})]})}),l.imageUrl&&e.jsxs(N,{children:[e.jsx(y,{children:e.jsx(v,{children:"Property Image"})}),e.jsx(D,{children:e.jsx("img",{src:l.imageUrl,alt:l.name,className:"w-full h-auto rounded-md object-cover"})})]})]}),e.jsx(b,{value:"access-codes",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Access Codes"}),e.jsx(k,{children:"Door codes and access information"})]}),e.jsx(h,{asChild:!0,children:e.jsxs(u,{to:`/access-codes/new?propertyId=${s}`,children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Add Code"]})})]}),e.jsx(D,{children:B.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-10",children:"No access codes for this property"}):e.jsxs(U,{children:[e.jsx(P,{children:e.jsxs(f,{children:[e.jsx(d,{children:"Code Name"}),e.jsx(d,{children:"Code"}),e.jsx(d,{children:"Expiry Date"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(R,{children:B.map(n=>e.jsxs(f,{children:[e.jsx(o,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.name]})}),e.jsx(o,{className:"font-mono",children:n.code}),e.jsx(o,{children:n.expiryDate?Y(W(n.expiryDate),"MMM d, yyyy"):"No expiry date"}),e.jsx(o,{className:"text-right",children:e.jsx(h,{asChild:!0,variant:"ghost",size:"sm",children:e.jsx(u,{to:`/access-codes/${n.id}/edit`,children:e.jsx(I,{className:"h-4 w-4"})})})})]},n.id))})]})})]})}),e.jsx(b,{value:"checklists",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Checklists"}),e.jsx(k,{children:"Cleaning and maintenance checklists"})]}),e.jsx(h,{asChild:!0,children:e.jsxs(u,{to:`/checklists/new?propertyId=${s}`,children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Add Checklist"]})})]}),e.jsx(D,{children:O.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-10",children:"No checklists for this property"}):e.jsxs(U,{children:[e.jsx(P,{children:e.jsxs(f,{children:[e.jsx(d,{children:"Checklist"}),e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Items"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(R,{children:O.map(n=>{const S=n.items.filter(_=>_.completed).length,A=n.items.length,L=n.completedAt||A>0&&S===A;return e.jsxs(f,{children:[e.jsx(o,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.title]})}),e.jsx(o,{children:e.jsx(T,{variant:"outline",children:n.type})}),e.jsx(o,{children:e.jsx(T,{variant:"secondary",className:L?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:L?"Complete":"In Progress"})}),e.jsxs(o,{children:[S," of ",A," items"]}),e.jsx(o,{className:"text-right",children:e.jsx(h,{asChild:!0,variant:"ghost",size:"sm",children:e.jsx(u,{to:`/checklists/${n.id}/edit`,children:e.jsx(I,{className:"h-4 w-4"})})})})]},n.id)})})]})})]})}),e.jsx(b,{value:"maintenance",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Maintenance Requests"}),e.jsx(k,{children:"Repair and maintenance issues"})]}),e.jsx(h,{asChild:!0,children:e.jsxs(u,{to:`/maintenance/new?propertyId=${s}`,children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Report Issue"]})})]}),e.jsx(D,{children:H.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-10",children:"No maintenance requests for this property"}):e.jsxs(U,{children:[e.jsx(P,{children:e.jsxs(f,{children:[e.jsx(d,{children:"Issue"}),e.jsx(d,{children:"Priority"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Date Reported"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(R,{children:H.map(n=>e.jsxs(f,{children:[e.jsxs(o,{className:"font-medium",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.title]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:n.description})]}),e.jsx(o,{children:e.jsx(T,{variant:"secondary",className:n.priority==="high"?"bg-red-100 text-red-800":n.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:n.priority})}),e.jsx(o,{children:e.jsx(T,{variant:"secondary",className:n.status==="open"?"bg-blue-100 text-blue-800":n.status==="in-progress"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",children:n.status})}),e.jsx(o,{children:Y(W(n.createdAt),"MMM d, yyyy")}),e.jsx(o,{className:"text-right",children:e.jsx(h,{asChild:!0,variant:"ghost",size:"sm",children:e.jsx(u,{to:`/maintenance/${n.id}/edit`,children:e.jsx(I,{className:"h-4 w-4"})})})})]},n.id))})]})})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Property Not Found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"The property you're looking for doesn't exist or has been removed."}),e.jsx(h,{asChild:!0,className:"mt-4",children:e.jsxs(u,{to:"/properties",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Back to Properties"]})})]})})}export{Ze as default};
