import{c as O,E as B,V as H,r as u,j as e,G as m,L as j,H as c,J as d,K as o,M as I,Z as L,_ as S,$ as x,Q as h,a0 as N,a9 as V,aG as z}from"./index-CFBfUQr5.js";import{T as E,a as F,b as y,c as n,d as $,e as l}from"./table-C3xMFgyL.js";import{S as G}from"./skeleton-CFnampVp.js";import{A as U,a as W,b as _,c as J,d as K,e as Q,f as Z,g as X,h as Y}from"./alert-dialog-dK_wMhNu.js";import{P as q}from"./plus-Cvcf7KTe.js";import{W as ee}from"./wrench-D4g40m_u.js";import{B as v}from"./building-acADVoMY.js";import{T as se}from"./trash-2-DDAci78G.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=O("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);function me(){const{t}=B(),{maintenanceRequests:r,properties:ae,getPropertyById:g,removeMaintenanceRequest:w}=H(),[i,T]=u.useState("all"),[C,p]=u.useState(!0);u.useEffect(()=>{if(Object.keys(r).length>0)p(!1);else{const s=setTimeout(()=>{p(!1)},500);return()=>clearTimeout(s)}},[r]);const f=Object.values(r).filter(s=>i==="all"?!0:i==="open"?s.status==="open":i==="in-progress"?s.status==="in-progress":i==="completed"?s.status==="completed":!0),A=s=>{switch(s){case"low":return"bg-green-500/10 text-green-500 hover:bg-green-500/20";case"medium":return"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20";case"high":return"bg-red-500/10 text-red-500 hover:bg-red-500/20";default:return""}},D=s=>{switch(s){case"open":return"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20";case"in-progress":return"bg-purple-500/10 text-purple-500 hover:bg-purple-500/20";case"completed":return"bg-green-500/10 text-green-500 hover:bg-green-500/20";default:return""}},P=async s=>{try{await w(s)}catch(a){console.error(a)}},k=Object.values(r).filter(s=>s.status==="open").length,R=Object.values(r).filter(s=>s.status==="in-progress").length,M=Object.values(r).filter(s=>s.status==="completed").length,b=Object.values(r).filter(s=>s.status==="open"&&s.priority==="high");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:t("maintenance.title")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:t("maintenance.description")})]}),e.jsx(m,{asChild:!0,children:e.jsxs(j,{to:"/maintenance/new",children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," ",t("maintenance.newRequest")]})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:t("maintenance.requests")}),e.jsx(I,{children:t("maintenance.requestsDescription")}),e.jsx(L,{defaultValue:"all",className:"w-full mt-4",onValueChange:T,children:e.jsxs(S,{className:"grid grid-cols-4 w-full max-w-md",children:[e.jsx(x,{value:"all",children:"All"}),e.jsx(x,{value:"open",children:"Open"}),e.jsx(x,{value:"in-progress",children:"In Progress"}),e.jsx(x,{value:"completed",children:"Completed"})]})})]}),e.jsx(h,{children:C?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,a)=>e.jsx(G,{className:"h-16 w-full"},a))}):f.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ee,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-lg font-semibold",children:"No maintenance requests found"}),e.jsx("p",{className:"text-muted-foreground",children:i==="all"?"Add a new maintenance request to get started":"Try adjusting your filters or search terms"})]}):e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(y,{children:[e.jsx(n,{className:"w-[300px]",children:t("maintenance.issue")}),e.jsx(n,{children:t("maintenance.property")}),e.jsx(n,{children:t("maintenance.status")}),e.jsx(n,{children:t("maintenance.priority")}),e.jsx(n,{children:t("maintenance.date")}),e.jsx(n,{className:"text-right",children:t("common.actions")})]})}),e.jsx($,{children:f.map(s=>{var a;return e.jsxs(y,{children:[e.jsxs(l,{className:"font-medium",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:s.description})]}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground mr-2"}),((a=g(s.propertyId))==null?void 0:a.name)||t("calendar.unknownProperty")]})}),e.jsx(l,{children:e.jsx(N,{className:D(s.status),variant:"secondary",children:s.status==="in-progress"?"In Progress":s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsx(l,{children:e.jsx(N,{className:A(s.priority),variant:"secondary",children:s.priority.charAt(0).toUpperCase()+s.priority.slice(1)})}),e.jsx(l,{children:V(new Date(s.createdAt),"MMM d, yyyy")}),e.jsxs(l,{className:"text-right",children:[e.jsx(m,{asChild:!0,variant:"ghost",size:"icon",children:e.jsx(j,{to:`/maintenance/${s.id}/edit`,children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsxs(U,{children:[e.jsx(W,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsxs(_,{children:[e.jsxs(J,{children:[e.jsx(K,{children:"Are you sure?"}),e.jsx(Q,{children:"This action cannot be undone. This will permanently delete the maintenance request."})]}),e.jsxs(Z,{children:[e.jsx(X,{children:t("common.cancel")}),e.jsx(Y,{onClick:()=>P(s.id),children:t("common.delete")})]})]})]})]})]},s.id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-lg",children:"Open Requests"})}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold",children:k})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-lg",children:"In Progress"})}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold",children:R})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-lg",children:"Completed"})}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold",children:M})})]})]}),b.length>0&&e.jsxs(c,{className:"border-red-200 bg-red-50 dark:bg-red-950/20",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx(o,{className:"text-red-500",children:"High Priority Issues"})]})}),e.jsx(h,{children:e.jsx("ul",{className:"space-y-2",children:b.map(s=>{var a;return e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsxs("span",{children:[((a=g(s.propertyId))==null?void 0:a.name)||t("calendar.unknownProperty"),": ",e.jsx("strong",{children:s.title})]})]}),e.jsx(m,{asChild:!0,variant:"outline",size:"sm",className:"ml-4",children:e.jsx(j,{to:`/maintenance/${s.id}`,children:"View"})})]},s.id)})})})]})]})}export{me as default};
