import{y as D,B as I,E as T,V as k,r as M,ah as L,ai as V,j as e,H as u,J as g,K as f,M as b,Q as S,T as o,G as A,aS as B,ab as H,ac as U,ad as z,ae as G,af as v,al as i,aD as l,aT as J}from"./index-CFBfUQr5.js";import{F as K,a as c,b as m,c as d,d as h,f as x,S as O}from"./separator-CeNxhGK4.js";import{M as Q,L as R}from"./moon-Ccpft3WP.js";import"./label-Cdm9zhvV.js";const Y=i.object({name:i.string().min(2,{message:"Name must be at least 2 characters."}),email:i.string().email({message:"Please enter a valid email address."}),phone:i.string().min(5,{message:"Phone number must be at least 5 characters."})});function Z(){const{user:s}=D(),{theme:N,toggleTheme:y,language:C,setLanguage:F}=I(),{t:a}=T(),{updateEmployee:w}=k(),[p,j]=M.useState(!1),t=L({resolver:V(Y),defaultValues:{name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||""},values:{name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||""}}),E=async r=>{if(!s){l({variant:"destructive",title:"Error",description:"User not authenticated."});return}j(!0);try{await w({id:s.id,name:r.name,email:r.email,phone:r.phone,role:s.role,startDate:s.startDate||new Date().toISOString(),properties:s.properties||[]});const{error:n}=await J.auth.updateUser({email:r.email,data:{name:r.name,phone:r.phone}});if(n)throw n;l({title:"Profile updated",description:"Your profile has been updated successfully."})}catch(n){console.error("Error updating profile:",n);const P=n instanceof Error?n.message:"Failed to update profile. Please try again.";l({variant:"destructive",title:"Error",description:P})}finally{j(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:a("profile.title")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:a("profile.updateProfile")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(u,{children:[e.jsxs(g,{children:[e.jsx(f,{children:a("profile.personalInfo")}),e.jsx(b,{children:a("profile.updateProfile")})]}),e.jsx(S,{children:e.jsx(K,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(E),className:"space-y-4",children:[e.jsx(c,{control:t.control,name:"name",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:a("common.name")}),e.jsx(h,{children:e.jsx(o,{...r})}),e.jsx(x,{})]})}),e.jsx(c,{control:t.control,name:"email",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:a("common.email")}),e.jsx(h,{children:e.jsx(o,{...r})}),e.jsx(x,{})]})}),e.jsx(c,{control:t.control,name:"phone",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:a("common.phone")}),e.jsx(h,{children:e.jsx(o,{...r})}),e.jsx(x,{})]})}),e.jsx(A,{type:"submit",className:"w-full",disabled:p,children:a(p?"common.loading":"common.save")})]})})})]}),e.jsxs(u,{children:[e.jsxs(g,{children:[e.jsx(f,{children:a("profile.appearance")}),e.jsx(b,{children:a("common.settings")})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{children:a("common.darkMode")})]}),e.jsx(B,{checked:N==="dark",onCheckedChange:y})]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{children:a("common.language")})]}),e.jsxs(H,{value:C,onValueChange:r=>F(r),children:[e.jsx(U,{children:e.jsx(z,{})}),e.jsxs(G,{children:[e.jsx(v,{value:"en",children:a("common.english")}),e.jsx(v,{value:"pt-br",children:a("common.portuguese")})]})]})]})]})})]})]})]})}export{Z as default};
