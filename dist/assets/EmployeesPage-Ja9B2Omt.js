import{c as v,y as S,X as A,V as T,r as i,j as e,G as t,Y as E,T as P,Z as D,_ as z,$ as h,H as m,Q as M,a0 as j,L as n}from"./index-CFBfUQr5.js";import{S as V}from"./skeleton-CFnampVp.js";import{P as $}from"./plus-Cvcf7KTe.js";import{U as B}from"./users-BU5ZOGGK.js";import{C as O}from"./calendar-LSReFn13.js";import{B as u}from"./building-acADVoMY.js";import{S as f}from"./square-pen-2UOtia5C.js";import{T as g}from"./trash-2-DDAci78G.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=v("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=v("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function X(){const{hasPermission:c}=S(),w=A(),{employees:l,removeEmployee:y}=T(),[b,o]=i.useState(!0),[r,C]=i.useState(""),[L,k]=i.useState("grid");i.useEffect(()=>{if(Object.keys(l).length>0)o(!1);else{const s=setTimeout(()=>{Object.keys(l).length===0&&o(!1)},1500);return()=>clearTimeout(s)}},[l]);const d=Object.values(l).filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.email.toLowerCase().includes(r.toLowerCase())||s.role.toLowerCase().includes(r.toLowerCase())),x=async s=>{try{await y(s)}catch(a){console.error(a)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Employees"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your team members and their assignments"})]}),c("create:employee")&&e.jsxs(t,{onClick:()=>w("/employees/new"),children:[e.jsx($,{className:"mr-2 h-4 w-4"})," Add Employee"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx(E,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(P,{placeholder:"Search employees...",className:"pl-8 w-full sm:w-[300px]",value:r,onChange:s=>C(s.target.value)})]}),e.jsx(D,{defaultValue:"grid",className:"w-[200px]",onValueChange:s=>k(s),children:e.jsxs(z,{className:"grid w-full grid-cols-2",children:[e.jsx(h,{value:"grid",children:"Grid"}),e.jsx(h,{value:"list",children:"List"})]})})]}),b?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((s,a)=>e.jsx(m,{className:"overflow-hidden h-[180px] animate-pulse",children:e.jsx(V,{className:"h-full w-full"})},a))}):d.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(B,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-lg font-semibold",children:"No employees found"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Try adjusting your search terms":"Add an employee to get started"})]}):L==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsx(m,{className:"overflow-hidden",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-semibold text-primary",children:s.name.split(" ").map(a=>a[0]).join("")})}),e.jsx("h3",{className:"font-semibold text-lg mt-2",children:s.name}),e.jsx(j,{variant:"outline",className:"mt-1",children:s.role==="manager"?"Property Manager":"Cleaner"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Started ",new Date(s.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Assigned to ",s.properties.length," properties"]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx(n,{to:`/employees/${s.id}`,children:e.jsx(t,{variant:"outline",size:"sm",children:"View Details"})}),c("edit:employee")&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{to:`/employees/${s.id}/edit`,children:e.jsx(t,{variant:"outline",size:"icon",className:"h-8 w-8",children:e.jsx(f,{className:"h-4 w-4"})})}),e.jsx(t,{variant:"outline",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>x(s.id),children:e.jsx(g,{className:"h-4 w-4"})})]})]})]})},s.id))}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx(m,{className:"overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-xl font-semibold text-primary",children:s.name.split(" ").map(a=>a[0]).join("")})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx(j,{variant:"outline",children:s.role==="manager"?"Property Manager":"Cleaner"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{to:`/employees/${s.id}`,children:e.jsx(t,{variant:"outline",size:"sm",children:"View Details"})}),c("edit:employee")&&e.jsxs(e.Fragment,{children:[e.jsx(n,{to:`/employees/${s.id}/edit`,children:e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(f,{className:"mr-2 h-4 w-4"})," Edit"]})}),e.jsxs(t,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>x(s.id),children:[e.jsx(g,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.phone})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Assigned to ",s.properties.length," properties"]})]})]})]})]})})},s.id))})]})}export{X as default};
