import{E as T,y as v,V as b,r as d,j as e,G as l,L as u,H as L,J as D,K as S,M as k,T as P,Y as A,Q as E,a9 as B}from"./index-CFBfUQr5.js";import{T as H,a as M,b as p,c,d as z,e as o}from"./table-C3xMFgyL.js";import{S as m}from"./skeleton-CFnampVp.js";import{P as I}from"./plus-Cvcf7KTe.js";import{B as f}from"./building-acADVoMY.js";import{S as O}from"./square-pen-2UOtia5C.js";import{T as R}from"./trash-2-DDAci78G.js";function F(){const{t:a}=T(),{hasPermission:i}=v(),{accessCodes:n,properties:C,removeAccessCode:y}=b(),[r,w]=d.useState(""),[N,x]=d.useState(!0),h=s=>{const t=C[s];return t?t.name:a("calendar.unknownProperty")};d.useEffect(()=>{if(Object.keys(n).length>0)x(!1);else{const s=setTimeout(()=>{Object.keys(n).length===0&&x(!1)},1500);return()=>clearTimeout(s)}},[n]);const j=Object.values(n).filter(s=>{const t=h(s.propertyId);return s.name.toLowerCase().includes(r.toLowerCase())||s.code.toLowerCase().includes(r.toLowerCase())||t.toLowerCase().includes(r.toLowerCase())}),g=async s=>{try{await y(s)}catch(t){console.error(t)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:a("accessCodes.title")}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:[a("accessCodes.title")," ",a("common.for")," ",a("common.properties")]})]}),i("create:accessCodes")&&e.jsx(l,{asChild:!0,children:e.jsxs(u,{to:"/access-codes/new",children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," ",a("accessCodes.newCode")]})})]}),e.jsxs(L,{children:[e.jsxs(D,{children:[e.jsx(S,{children:a("accessCodes.title")}),e.jsxs(k,{children:[a("accessCodes.title")," ",a("common.for")," ",a("common.properties")]}),e.jsxs("div",{className:"flex w-full max-w-sm items-center space-x-2 mt-4",children:[e.jsx(P,{placeholder:`${a("common.search")}...`,value:r,onChange:s=>w(s.target.value),className:"w-full"}),e.jsx(l,{type:"submit",size:"icon",children:e.jsx(A,{className:"h-4 w-4"})})]})]}),e.jsx(E,{children:N?e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"h-10 w-full"}),e.jsx(m,{className:"h-10 w-full"}),e.jsx(m,{className:"h-10 w-full"})]}):j.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(f,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-lg font-semibold",children:"No access codes found"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Try adjusting your search terms":"Add an access code to get started"})]}):e.jsxs(H,{children:[e.jsx(M,{children:e.jsxs(p,{children:[e.jsx(c,{children:a("accessCodes.property")}),e.jsx(c,{children:a("accessCodes.codeName")}),e.jsx(c,{children:a("accessCodes.code")}),e.jsx(c,{children:a("accessCodes.expiryDate")}),i("edit:accessCodes")&&e.jsx(c,{className:"w-[100px]",children:a("common.actions")})]})}),e.jsx(z,{children:j.map(s=>e.jsxs(p,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-muted-foreground"}),h(s.propertyId)]}),e.jsx(o,{children:s.name}),e.jsx(o,{className:"font-mono",children:s.code}),e.jsx(o,{children:s.expiryDate?B(new Date(s.expiryDate),"MMM dd, yyyy"):a("accessCodes.noExpiryDate")}),i("edit:accessCodes")&&e.jsxs(o,{children:[e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(u,{to:`/access-codes/${s.id}/edit`,children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>g(s.id),children:e.jsx(R,{className:"h-4 w-4"})})]})]},s.id))})]})})]})]})}export{F as default};
